{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}

     <div class="container">
        <h2 style="text-align: center;">Buy a Book</h2>
        <form action ="" method="post" class="login-form">
            {% csrf_token %}
            <div>
                <label for="name">Name</label>
                <input
                       id="name"
                       type="text"
                       placeholder="name"
                       name="name"
                       required
                       />
              </div>
    
          <div>
            <label for="amount">Price</label>
            <input
                   id="amount"
                   type="text"
                   placeholder="amount"
                   name="amount"
                   />
          </div>
          <button class="btn btn--form" type="submit" value="Buy">
            Buy
          </button>
        </form>
        <br/>

        {% if payment %}
        <form action="{% url 'payment_status' %}" method="POST">
            {% csrf_token %}
            <script
                src="https://checkout.razorpay.com/v1/checkout.js"
                data-key="rzp_test_9s4Zto25Cg7mER" // Enter the Test API Key ID generated from Dashboard → Settings → API Keys
                data-amount="{{ payment.amount }}" // Amount is in currency subunits. Hence, 29935 refers to 29935 paise or ₹299.35.
                data-currency="INR"// You can accept international payments by changing the currency code. Contact our Support Team to enable International for your account
                data-order_id="{{ payment.id }}"// Replace with the order_id generated by you in the backend.
                data-buttontext="Pay with Razorpay"
                data-name="Buy Book"
                data-description="Buy book"
                data-image="https://example.com/your_logo.jpg"
                data-prefill.name="{{ payment.name }}"
                data-prefill.email="madarapusathwika9@gmail.com"
                data-theme.color="#F37254"
            ></script>
            <input type="hidden" custom="Hidden Element" name="hidden"/>
            </form>
            {% endif %}
     </div>
{% endblock %}